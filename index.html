<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koch Chemie • Detailing Beast 2.0</title>
    <meta name="theme-color" content="#ffd200">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Floating akční tlačítka -->
<button class="floating-btn menu-btn" onclick="toggleSidebar()" aria-label="Inventář">
    <i class="fas fa-flask"></i>
</button>
<button class="floating-btn checklist-btn" onclick="toggleChecklist()" aria-label="Checklist">
    <i class="fas fa-clipboard-list"></i>
</button>
<button class="floating-btn tools-btn" onclick="toggleTools()" aria-label="Nástroje">
    <i class="fas fa-tools"></i>
</button>
<button class="floating-btn theme-btn" onclick="toggleTheme()" aria-label="Tmavý/Světlý režim">
    <i class="fas fa-moon"></i><i class="fas fa-sun"></i>
</button>

<!-- Celookénkový timer (pro Reactive Rust Remover, pěnu atd.) -->
<div class="timer-overlay" id="timerOverlay">
    <div class="timer-display">
        <div class="timer-circle">
            <svg width="200" height="200" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" class="track"></circle>
                <circle cx="50" cy="50" r="45" class="progress" id="timerPath"></circle>
            </svg>
            <div class="timer-text" id="timerText">5:00</div>
        </div>
        <button class="timer-close" onclick="stopTimer()">✕</button>
    </div>
</div>

<!-- Toast notifikace (Čas vypršel!, Hotovo! atd.) -->
<div class="toast" id="toast">Hotovo!</div>

<!-- SIDEBAR – Tvůj inventář Koch Chemie -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h3><i class="fas fa-vial"></i> Moje Chemie</h3>
        <button class="close-btn" onclick="toggleSidebar()">×</button>
    </div>
    <div class="inventory-counter">
        Máš doma: <span id="owned-count">0</span> produktů
    </div>

    <ul class="category-list">
        <li class="category-item active" data-cat="universal">Univerzální čističe</li>
        <li class="category-item" data-cat="wheels">Kola & Rezy</li>
        <li class="category-item" data-cat="wash">Mytí & Pěna</li>
        <li class="category-item" data-cat="interior">Interiér</li>
        <li class="category-item" data-cat="exterior">Exteriér</li>
        <li class="category-item" data-cat="extra">Extra & Speciál</li>
    </ul>

    <!-- === PRODUKTY === -->
    <ul class="product-list active" id="universal">
        <li class="product-item owned" data-ratio="10"  data-name="Green Star">Green Star (1:10)</li>
        <li class="product-item owned" data-ratio="5"   data-name="Green Star Silné">Green Star – Silné (1:5)</li>
        <li class="product-item owned" data-ratio="20"  data-name="Green Star Jemné">Green Star – Jemné (1:20)</li>
        <li class="product-item owned" data-ratio="10"  data-name="Mehrzweckreiniger">Mehrzweckreiniger</li>
        <li class="product-item" data-ratio="15" data-name="Allround Cleaner">Allround Cleaner</li>
    </ul>
    <ul class="product-list" id="wheels">
        <li class="product-item owned" data-ratio="10" data-name="Reactive Wheel Cleaner">Reactive Wheel Cleaner</li>
        <li class="product-item owned" data-ratio="1"  data-name="Reactive Rust Remover">Reactive Rust Remover (nereděný)</li>
        <li class="product-item" data-ratio="4" data-name="Felgenreiniger Viscous">Felgenreiniger Viscous</li>
    </ul>
    <ul class="product-list" id="wash">
        <li class="product-item owned" data-ratio="15"  data-name="Gentle Snow Foam">Gentle Snow Foam (1:15)</li>
        <li class="product-item owned" data-ratio="300" data-name="Autoshampoo">Autoshampoo (1:300)</li>
        <li class="product-item owned" data-ratio="200" data-name="Nanomagic Shampoo">Nanomagic Shampoo</li>
        <li class="product-item owned" data-ratio="5"   data-name="Insect & Dirt Remover">Insect & Dirt Remover</li>
    </ul>
    <ul class="product-list" id="interior">
        <li class="product-item owned" data-ratio="20" data-name="Pol Star">Pol Star – textil/kůže</li>
        <li class="product-item owned" data-ratio="1"  data-name="Top Star">Top Star – plasty</li>
        <li class="product-item" data-ratio="10" data-name="Lederpflege">Lederpflege (kůže)</li>
    </ul>
    <ul class="product-list" id="exterior">
        <li class="product-item owned" data-ratio="1" data-name="Nanomagic Plastcare">Nanomagic Plastcare</li>
        <li class="product-item" data-ratio="1" data-name="Speed Glass Cleaner">Speed Glass Cleaner</li>
    </ul>
    <ul class="product-list" id="extra">
        <li class="product-item" data-ratio="1" data-name="Hartwachs BMP">Hartwachs BMP</li>
        <li class="product-item" data-ratio="1" data-name="Protector Wax">Protector Wax</li>
    </ul>
</div>

<!-- DETAILING CHECKLIST 2.0 -->
<div class="checklist" id="checklist">
    <div class="checklist-header">
        <h3><i class="fas fa-clipboard-check"></i> Detailing Checklist</h3>
        <button class="close-btn" onclick="toggleChecklist()">×</button>
    </div>
    <div class="progress-header">
        <div class="progress-numbers">
            <span id="done-count">0</span> / <span id="total-count">23</span>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
    </div>

    <ul class="task-list">
        <li class="task-item" data-id="1"><div class="check"></div><div class="task-text"><strong>Příprava pracoviště</strong><br><small>Vysát interiér • vyndat věci • 2× kbelík + grit guard • hadice</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="2"><div class="check"></div><div class="task-text"><strong>Kola – čistič</strong><br><small>Reactive Wheel Cleaner 1:10 • 3–5 min</small></div><button class="timer-btn" onclick="startTimer(4,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="3"><div class="check"></div><div class="task-text"><strong>Kola – kartáč + pneumatiky</strong><br><small>Green Star na gumu • ovčí vlna na ráfky</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="4"><div class="check"></div><div class="task-text"><strong>Opláchnout kola</strong></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="5"><div class="check"></div><div class="task-text"><strong>Předmytí pěnou</strong><br><small>Gentle Snow Foam 1:15 • 5–8 min</small></div><button class="timer-btn" onclick="startTimer(6,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="6"><div class="check"></div><div class="task-text"><strong>Opláchnout pěnu</strong></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="7"><div class="check"></div><div class="task-text"><strong>Hmyz & dehet</strong><br><small>Insect & Dirt Remover • 5 min</small></div><button class="timer-btn" onclick="startTimer(5,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="8"><div class="check"></div><div class="task-text"><strong>Polétavá rez</strong><br><small>Reactive Rust Remover • MAX 5 min!</small></div><button class="timer-btn" onclick="startTimer(5,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="9"><div class="check"></div><div class="task-text"><strong>2-kbelíkové mytí</strong><br><small>Nanomagic Shampoo • shora dolů</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="10"><div class="check"></div><div class="task-text"><strong>Clay dekontaminace</strong><br><small>Lubrikant Green Star 1:30</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="11"><div class="check"></div><div class="task-text"><strong>Finální oplach + listování</strong></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="12"><div class="check"></div><div class="task-text"><strong>Sušení</strong><br><small>Patovací technika • Koch mikrovlákno</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="13"><div class="check"></div><div class="task-text"><strong>Čištění skel</strong><br><small>Speed Glass Cleaner + 2 utěrky</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="14"><div class="check"></div><div class="task-text"><strong>Interiér – vysávání + pára</strong></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="15"><div class="check"></div><div class="task-text"><strong>Textil & Alcantara</strong><br><small>Pol Star 1:20 + kartáč</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="16"><div class="check"></div><div class="task-text"><strong>Plasty interiéru</strong><br><small>Mehrzweckreiniger 1:20</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="17"><div class="check"></div><div class="task-text"><strong>Ošetření plastů</strong><br><small>Top Star • matný/saténový vzhled</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="18"><div class="check"></div><div class="task-text"><strong>Vnější plasty & pneumatiky</strong><br><small>Nanomagic Plastcare</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="19"><div class="check"></div><div class="task-text"><strong>Voskování / Sealant</strong><br><small>ProtectorWax nebo 1Z Einszett</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="20"><div class="check"></div><div class="task-text"><strong>Provonění interiéru</strong><br><small>Fresh Up nebo vůně podle výběru</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="21"><div class="check"></div><div class="task-text"><strong>Finální kontrola</strong><br><small>Detailní prohlídka + foto před/po</small></div><button class="timer-btn" onclick="startTimer(0,this)"><i class="fas fa-clock"></i></button></li>
        <li class="task-item" data-id="22"><div class="check"></div><div class="task-text"><strong>Hotovo!</strong><br><small>Užij si ten pocit!</small></div><button class="timer-btn"><i class="fas fa-trophy"></i></button></li>
        <li class="task-item" data-id="23"><div class="check"></div><div class="task-text"><strong>Statistiky mytí</strong><br><small id="stats-text">Načítám…</small></div><button class="timer-btn" onclick="showStats()"><i class="fas fa-chart-bar"></i></button></li>
    </ul>

    <button class="reset-btn" onclick="resetChecklist()">
        <i class="fas fa-redo"></i> Začít nové mytí od nuly
    </button>
</div>

<!-- TOOLS PANEL – extra brutální funkce -->
<div class="tools-panel" id="toolsPanel">
    <div class="panel-header">
        <h3><i class="fas fa-wrench"></i> Nástroje & Funkce</h3>
        <button class="close-btn" onclick="toggleTools()">×</button>
    </div>
    <div class="tool-grid">
        <button onclick="speakCurrentTask()"><i class="fas fa-volume-up"></i> Hlasově přečíst aktuální krok</button>
        <button onclick="startFullTimer()"><i class="fas fa-stopwatch"></i> Spustit časovač celého mytí</button>
        <button onclick="showRandomTip()"><i class="fas fa-lightbulb"></i> Náhodný detailing tip</button>
        <button onclick="exportStats()"><i class="fas fa-download"></i> Exportovat statistiky</button>
        <button onclick="clearAllData()"><i class="fas fa-trash"></i> Vymazat všechna data</button>
    </div>
</div>

<!-- HEADER -->
<header>
    <div class="logo">KOCH<span>BEAST</span></div>
    <div class="subtitle-header">Profesionální detailing • Verze 2.0</div>
</header>

<!-- HLAVNÍ KALKULAČKA ŘEDĚNÍ -->
<main class="container">
    <h2>Přesný výpočet ředění</h2>
    <div class="subtitle" id="selected-product">Vyber produkt nebo nastav ručně</div>

    <div class="mode-switch">
        <button class="mode-btn" id="jemne"><i class="fas fa-feather"></i> Jemné</button>
        <button class="mode-btn active" id="bezne"><i class="fas fa-spray-can"></i> Běžné</button>
        <button class="mode-btn" id="silne"><i class="fas fa-fire"></i> Silné</button>
    </div>

    <div class="quick-vol">
        <button class="qv-btn" onclick="setVolume(500)">500 ml</button>
        <button class="qv-btn active" onclick="setVolume(1000)">1 l</button>
        <button class="qv-btn" onclick="setVolume(2000)">2 l</button>
        <button class="qv-btn" onclick="setVolume(5000)">5 l</button>
    </div>

    <div class="preset-buttons">
        <button class="preset-btn" onclick="setPreset(5)">1:5</button>
        <button class="preset-btn" onclick="setPreset(10)">1:10</button>
        <button class="preset-btn" onclick="setPreset(20)">1:20</button>
        <button class="preset-btn" onclick="setPreset(50)">1:50</button>
        <button class="preset-btn" onclick="setPreset(200)">1:200</button>
        <button class="preset-btn" onclick="setPreset(300)">1:300</button>
    </div>

    <div class="slider-box">
        <div class="slider-label">
            <span>Objem nádoby</span>
            <div class="value" id="vol_label">1 000</div> ml
        </div>
        <input type="range" id="volume" min="100" max="10000" step="50" value="1000">
    </div>

    <div class="slider-box">
        <div class="slider-label">
            <span>Poměr ředění</span>
            <div class="value">1:<span id="ratio_label">10</span></div>
        </div>
        <input type="range" id="ratio" min="1" max="500" value="10">
    </div>

    <div class="output-box">
        <div class="result-line">
            <div class="big-num" id="water_out">909</div>
            <div class="label">ml vody</div>
        </div>
        <div class="result-line">
            <div class="big-num" id="chem_out">91</div>
            <div class="label">ml chemie</div>
        </div>
        <div class="qr-wrapper" id="qrcode"></div>
        <button class="save-bottle-btn" onclick="saveCurrentMix()">
            <i class="fas fa-save"></i> Uložit tuto láhev do historie
        </button>
    </div>

    <!-- Historie namíchaných láhví -->
    <section class="history-section">
        <h3><i class="fas fa-history"></i> Posledních 10 láhví</h3>
        <div id="history-list" class="history-grid"></div>
    </section>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="script.js"></script>
</body>
</html>